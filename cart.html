<!DOCTYPE html>
<html>
<head>
  <title>Cart</title>

  <link href="cart.css" type="text/css" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.2.0.js"></script>
</head>
<body>
  <!-- Navbar -->
  <header>
    <ul>
      <a href="index.html"><li id="home">Home</li></a>
      <a href="cart.html"><li id="cart">Cart (0)</li></a>
      <a href="login.html"><li id="login">Login/Register</li></a>
    </ul>
  </header>

  <!-- Title -->
  <div>
    <h1>Cart</h1>
  </div>

  <!-- Cart -->
  <table align="center">
    <thead>
      <tr>
        <th colspan=2>Item</th>
        <th>Quantity</th>
        <th>Cost</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody class="cart">
    </tbody>

    <tfoot>
      <tr id="subtotal">
        <td colspan=3>Subtotal</td>
      </tr>
      <tr id="tax">
        <td colspan=3>Tax</td>
      </tr>
      <tr id="total">
        <td colspan=3>Total</td>
      </tr>
    </tfoot>
  </table>

  <div class="coupon">
    <p>Enter coupon code: <input type="username"></p>
  </div>

  <div class="button">
      <a href="checkout.html"><button>Checkout</button></a>
  </div>


  <footer>
  </footer>


<script>

  $.ajax({
    url: "http://thiman.me:1337/cart/kody",
    type: "GET",
    success:(function(e){
      menu = e;

      var cart = $('.cart');

      for (var i = 0; i < menu.length; i++){
          console.log(menu);

          if (menu[i]["quantity"] === 0){
            var row = document.createElement("tr")

            var image = document.createElement("td");
            image.className = "image";

            var img = document.createElement('img');
            img.setAttribute("id", 1);
            img.src = menu[i]["img"];

            image.appendChild(img);

            var title = document.createElement("td");
            title.className = "title";
            title.innerHTML = menu[i]["title"];

            var quantity = document.createElement("td");
            quantity.innerHTML = menu[i]["quantity"];

            var cost = document.createElement("td");
            cost.innerHTML = '$' + (menu[i]["quantity"] * menu[i]["price"]) + ".00";

            var decrease = document.createElement("td");
            var button = $('<button/>').addClass("button").addClass("button" + i).html("Delete");
            decrease.append(button);

            row.append(image);
            row.append(title);
            row.append(quantity);
            row.append(cost);
            row.append(decrease);

            cart.append(row);
          }
      }

      var subtotal = document.querySelector("#subtotal");
      var sub = document.createElement("td");
      var number;
      for (var i = 0; i < menu.length; i++){
        number += menu[i]["price"] * menu[i]["quantity"]
      }
      sub.innerHTML = "$" + (number) + ".00";
      subtotal.appendChild(sub);

      var tax = document.querySelector("#tax");
      var t = document.createElement("td");
      var tnumber = Math.round(.0725*(number)*100)/100;
      t.innerHTML = "$" + tnumber;
      tax.appendChild(t);

      var total = document.querySelector("#total");
      var tot = document.createElement("td");
      tot.innerHTML = "$" + (number + tnumber);
      total.appendChild(tot);


    })
  });


  //
  // var menu = localStorage.getItem("menu");
  //
  // menu=JSON.parse(menu);
  //
  //
  // var first = localStorage.getItem('first');
  // var second = localStorage.getItem('second');
  // var third = localStorage.getItem('third');
  // var fourth = localStorage.getItem('fourth');
  //
  // var one = prices[0]*first;
  // var two = prices[1]*second;
  // var three = prices[2]*third;
  // var four = prices[3]*fourth;
  //
  //
  // var cartc = document.querySelector('.cart');
  // var cart = document.querySelector('#cart');
  //
  //
  // var cartNumber = localStorage.getItem('cartNumber');
  //
  // cart.innerHTML = "Cart (" + cartNumber + ")";
  //
  //
  // var brow = document.querySelector('#bi');
  // var srow = document.querySelector("#s");
  // var krow = document.querySelector("#k");
  // var brrow = document.querySelector("#br");
  //
  //
  // for (var i = 0; i < menu.length; i++){
  //
  //   // if (menu[i]["quantity"] != 0){
  //
  //     var row = document.createElement("tr")
  //
  //
  //     var image = document.createElement("td");
  //     image.className = "image";
  //
  //     var img = document.createElement('img');
  //     img.setAttribute("id", 1);
  //     img.src = menu[i]["img"];
  //
  //     image.appendChild(img);
  //
  //     var title = document.createElement("td");
  //     title.className = "title";
  //     title.innerHTML = menu[i]["title"];
  //
  //     var quantity = document.createElement("td");
  //     quantity.innerHTML = menu[i]["quantity"];
  //
  //     var cost = document.createElement("td");
  //     cost.innerHTML = '$' + (menu[i]["quantity"] * menu[i]["price"]) + ".00";
  //
  //     var decrease = document.createElement("td");
  //
  //     row.appendChild(image);
  //     row.appendChild(title);
  //     row.appendChild(quantity);
  //     row.appendChild(cost);
  //     row.appendChild(decrease);
  //
  //     cartc.appendChild(row);
  //
  //   // }
  // }


</script>

</body>
</html>
